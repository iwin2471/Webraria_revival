(()=>{var h=class{constructor(){}static getInstance(){return this.instance==null&&(this.instance=new h),this.instance}initElement(e){this.element=document.getElementById(e),this.context=this.element.getContext("2d"),this.context.scale(2,2),this.context.translate(0,-2500)}getContext(){return this.context}getElement(){return this.element}},a=h;var c=new Array;for(let r=0;r<1920*5;r++)c[r]=new Array;var b=class{constructor(){this.tileMap={tile:{dirt:[new Image,new Image,new Image,new Image],water:[new Image,new Image,new Image,new Image]},ore:[new Image,new Image,new Image,new Image,new Image]};this.tileMap.tile.dirt[0].src="Resource/Tiles/dirt/floor_dirt01.png",this.tileMap.tile.dirt[1].src="Resource/Tiles/dirt/floor_dirt02.png",this.tileMap.tile.dirt[2].src="Resource/Tiles/dirt/floor_dirt03.png",this.tileMap.tile.dirt[3].src="Resource/Tiles/dirt/floor_dirt04.png",this.tileMap.tile.water[0].src="Resource/Tiles/liquid/water_opacity_90.png",this.tileMap.tile.water[0].src="Resource/Tiles/liquid/water_opacity_95.png",this.tileMap.tile.water[0].src="Resource/Tiles/liquid/water_surface_opacity_90.png",this.tileMap.tile.water[0].src="Resource/Tiles/liquid/water_surface_opacity_95.png",this.tileMap.ore[0].src="Resource/Tiles/Mineral/copperS.png",this.tileMap.ore[1].src="Resource/Tiles/Mineral/iro.png",this.tileMap.ore[2].src="Resource/Tiles/Mineral/dia2.png",this.tileMap.ore[3].src="Resource/Tiles/object/stone.png",this.tileMap.ore[4].src="Resource/Tiles/dirt/floor_dirt04.png"}static getInstance(){return this.instance}},d=b;d.instance=new b;var u=class{constructor(e,i,s){this.x=0;this.pos=[];for(this.amp=e,this.wl=i,this.fq=1/i,this.psng=new E,this.a=this.psng.next(),this.b=this.psng.next(),this.pos=[];this.x<s;)this.x%this.wl==0?(this.a=this.b,this.b=this.psng.next(),this.pos.push(this.a*this.amp)):this.pos.push(this.interpolate(this.a,this.b,this.x%this.wl/this.wl)*this.amp),this.x++}interpolate(e,i,s){let o=s*Math.PI,n=(1-Math.cos(o))*.5;return e*(1-n)+i*n}generateNoise(e,i,s,o,n){let g=[];for(let p=0;p<s;p++)g.push(new u(e,i,n)),e/=o,i/=o;return g}combineNoise(e){let i=[];for(let s=0,o=0,n=0;s<e[0].pos.length;s++){for(o=0,n=0;n<e.length;n++)o+=e[n].pos[s];i.push(o)}return i}},v=u,E=class{constructor(){this.Z=0;this.M=4294967296;this.A=1664525;this.C=1;this.Z=Math.floor(Math.random()*this.M)}next(){return this.Z=(this.A*this.Z+this.C)%this.M,this.Z/this.M-.5}};var x=class{constructor(){this.canvas=a.getInstance();this.cnt=0;this.lastLayer=[];this.layerCnt=0;this.terrain=d.getInstance()}makeSomeNoise(){console.log(a.getInstance().getElement());let e=new v(128,128,a.getInstance().getElement().width);return e.combineNoise(e.generateNoise(128,128,8,2,this.canvas.getElement().width))}generateWorld(){let e=this.makeSomeNoise(),i=this.canvas.getElement(),s=this.canvas.getContext(),o=i.height*5,n=i.width*5,g=o/2;for(let p=0;p<n;p+=8);}drawWorld(){let e=this.canvas.getElement(),i=this.canvas.getContext(),s="",o=.1,n,g=0,p=0,f=e.height*5,R=e.width*5,w=0;var H;setInterval(()=>{for(;this.cnt==0;){i.clearRect(0,0,R,f),n=f/2;for(var m=0;m<R;m+=8){Math.floor(Math.random()*2)==0?(w=Math.ceil(Math.random()*2),n-=Math.ceil(Math.random()*w*8)):n+=Math.ceil(Math.random()*w*8),p=0;for(var l=0;l<f;l+=1)if(c[m][l]=!1,l>n)if(p==0){if(l%8==0){let W=Math.floor(Math.random()*3);i.drawImage(this.terrain.tileMap.tile.dirt[W],m,l),c[m][l]=!0,p++}}else c[m][l]=!0,l%8==0&&i.drawImage(this.terrain.tileMap.tile.dirt[3],m,l)}console.log("World Loading Complete"),this.cnt++}},500)}},S=x;var M=class{constructor(){this.worldgen=new S}generateWorld(){this.worldgen.drawWorld()}},L=M;var y=class{constructor(e,i){this.x=e,this.y=i}setXY(e,i){this.x=e,this.y=i}},_=y;var I=class{constructor(e,i){this.sprite=new Image;this.loaded=!1;this.movementSpeed=8;this.position=new _;this.width=8;this.height=16;this.name=e,this.sprite.src=i,this.sprite.onload=()=>{this.loaded=!0}}get speed(){return this.movementSpeed}setPosition(e,i){this.position.setXY(e,i)}get x(){return this.position.x}get y(){return this.position.y}clearRect(){a.getInstance().getContext().clearRect(this.x,this.y,this.width,this.height)}isMonster(){return!1}},k=I;var C=class extends k{constructor(e,i){super(e,i);this.sideMovementSpeed=8;this.jumpForce=24;this.canJump=!1}},P=C;var t=new P("JohnSoo","Resource/Character/3.png");var T=class{constructor(){this.canvas=a.getInstance();this.element=this.canvas.getElement();this.context=this.canvas.getContext();window.addEventListener("keydown",q),window.addEventListener("keyup",A)}startGame(){this.canvas=a.getInstance(),this.element=this.canvas.getElement(),this.context=this.canvas.getContext(),this.elemLeft=this.element.offsetLeft+this.element.clientLeft,this.elemTop=this.element.offsetTop+this.element.clientTop,this.element.onclick=({pageX:e,pageY:i})=>{let s=e-this.elemLeft,o=i-this.elemTop;console.log(s,o),console.log(c[s][o])},t.setPosition(0,2400),this.loop()}loop(){window.requestAnimationFrame(()=>this.loop()),t.clearRect(),c[t.position.x][t.position.y+16]?t.canJump=!0:t.position.y+=2,this.context.rect(t.position.y,t.position.y,t.width,t.height),this.context.fillStyle="rgba(0,0,0,0)",this.context.fill(),this.context.drawImage(t.sprite,t.position.x,t.position.y,t.width,t.height)}};function q({keyCode:r}){switch(r){case 37:c[t.position.x-t.speed][t.position.y+15]||(t.clearRect(),t.position.x-=t.speed);break;case 32:case 38:if(!t.canJump)break;t.clearRect(),t.position.y-=t.jumpForce,t.canJump=!1;break;case 39:c[t.position.x+t.speed][t.position.y+15]||(t.clearRect(),t.position.x+=t.speed);break;case 40:t.clearRect(),t.position.y+=10;break}}function A({keyCode:r,type:e}){}function D(){let r=new L,e=new T;a.getInstance().initElement("mainCanvas"),r.generateWorld(),e.startGame(),window.requestAnimationFrame(()=>e.loop())}D();})();
//# sourceMappingURL=bundle.js.map
