(()=>{var f=class{constructor(){}static getInstance(){return this.instance==null&&(this.instance=new f),this.instance}initElement(t){this.element=document.getElementById(t),this.context=this.element.getContext("2d"),this.context.scale(2,2),this.context.translate(0,-2500)}getContext(){return this.context}getElement(){return this.element}},h=f;var s=[,],m=[,],p=new Array;for(var v=0;v<1920*5;v++)p[v]=new Array;s[0]=new Image;s[0].src="Resource/Tiles/dirt/floor_dirt01.png";s[1]=new Image;s[1].src="Resource/Tiles/dirt/floor_dirt02.png";s[2]=new Image;s[2].src="Resource/Tiles/dirt/floor_dirt03.png";s[3]=new Image;s[3].src="Resource/Tiles/dirt/floor_dirt04.png";s[4]=new Image;s[4].src="Resource/Tiles/liquid/water_opacity_90.png";s[5]=new Image;s[5].src="Resource/Tiles/liquid/water_opacity_95.png";s[6]=new Image;s[6].src="Resource/Tiles/liquid/water_surface_opacity_90.png";s[7]=new Image;s[7].src="Resource/Tiles/liquid/water_surface_opacity_95.png";m[0]=new Image;m[0].src="Resource/Tiles/Mineral/copperS.png";m[1]=new Image;m[1].src="Resource/Tiles/Mineral/iro.png";m[2]=new Image;m[2].src="Resource/Tiles/Mineral/dia2.png";m[3]=new Image;m[3].src="Resource/Tiles/object/stone.png";m[4]=new Image;m[4].src="Resource/Tiles/dirt/floor_dirt04.png";var D=[,],x=[s,D];var w=class{constructor(t,e,r){this.x=0;this.pos=[];for(this.amp=t,this.wl=e,this.fq=1/e,this.psng=new S,this.a=this.psng.next(),this.b=this.psng.next(),this.pos=[];this.x<r;)this.x%this.wl==0?(this.a=this.b,this.b=this.psng.next(),this.pos.push(this.a*this.amp)):this.pos.push(this.interpolate(this.a,this.b,this.x%this.wl/this.wl)*this.amp),this.x++}interpolate(t,e,r){let o=r*Math.PI,i=(1-Math.cos(o))*.5;return t*(1-i)+e*i}generateNoise(t,e,r,o,i){let g=[];for(let l=0;l<r;l++)g.push(new w(t,e,i)),t/=o,e/=o;return g}combineNoise(t){let e=[];for(let r=0,o=0,i=0;r<t[0].pos.length;r++){for(o=0,i=0;i<t.length;i++)o+=t[i].pos[r];e.push(o)}return e}},y=w,S=class{constructor(){this.Z=0;this.M=4294967296;this.A=1664525;this.C=1;this.Z=Math.floor(Math.random()*this.M)}next(){return this.Z=(this.A*this.Z+this.C)%this.M,this.Z/this.M-.5}};var M=class{constructor(){this.canvas=h.getInstance();this.cnt=0;this.lastLayer=[];this.layerCnt=0}makeSomeNoise(){let t=new y(128,128,this.canvas.getElement().width),e=t.combineNoise(t.generateNoise(128,128,8,2,this.canvas.getElement().width));return console.log(e),e}generateWorld(){let t=this.makeSomeNoise(),e=this.canvas.getElement(),r=this.canvas.getContext(),o=e.height*5,i=e.width*5,g=o/2;for(let l=0;l<i;l+=8);}drawWorld(){this.makeSomeNoise();let t=this.canvas.getElement(),e=this.canvas.getContext(),r="",o=.1,i,g=0,l=0,d=t.height*5,R=t.width*5,b=0;var J;setInterval(()=>{for(;this.cnt==0;){e.clearRect(0,0,R,d),i=d/2;for(var u=0;u<R;u+=8){Math.floor(Math.random()*2)==0?(b=Math.ceil(Math.random()*2),i-=Math.ceil(Math.random()*b*8)):i+=Math.ceil(Math.random()*b*8),l=0;for(var c=0;c<d;c+=1)if(p[u][c]=!1,c>i)if(l==0){if(c%8==0){var N=Math.floor(Math.random()*3);e.drawImage(x[0][N],u,c),p[u][c]=!0,l++}}else p[u][c]=!0,c%8==0&&e.drawImage(x[0][3],u,c)}console.log("World Loading Complete"),this.cnt++}},500)}},E=M;var C=class{constructor(t,e){this.x=t,this.y=e}setXY(t,e){this.x=t,this.y=e}},_=C;var I=class{constructor(t,e){this.sprite=new Image;this.loaded=!1;this.movementSpeed=8;this.position=new _;this.width=8;this.height=16;this.name=t,this.sprite.src=e,this.sprite.onload=()=>{this.loaded=!0}}get speed(){return this.movementSpeed}setPosition(t,e){this.position.setXY(t,e)}get x(){return this.position.x}get y(){return this.position.y}clearRect(){h.getInstance().getContext().clearRect(this.x,this.y,this.width,this.height)}isMonster(){return!1}},k=I;var T=class extends k{constructor(t,e){super(t,e);this.sideMovementSpeed=8;this.jumpForce=24;this.canJump=!1}},L=T;var n=new L("JohnSoo","Resource/Character/3.png"),H=60;function P(){let a=h.getInstance(),t=a.getContext(),e=a.getElement();window.addEventListener("keydown",q),window.addEventListener("keyup",A);let r=e.offsetLeft+e.clientLeft,o=e.offsetTop+e.clientTop;e.onclick=({pageX:i,pageY:g})=>{let l=i-r,d=g-o;console.log(l,d),console.log(p[l][d])},n.setPosition(0,2400),setInterval(function(){n.clearRect(),p[n.position.x][n.position.y+16]?n.canJump=!0:n.position.y+=2,t.rect(n.position.y,n.position.y,n.width,n.height),t.fillStyle="rgba(0,0,0,0)",t.fill(),t.drawImage(n.sprite,n.position.x,n.position.y,n.width,n.height)},1e3*1/H)}function q({keyCode:a}){switch(a){case 37:p[n.position.x-n.speed][n.position.y+15]||(n.clearRect(),n.position.x-=n.speed);break;case 32:case 38:if(!n.canJump)break;n.clearRect(),n.position.y-=n.jumpForce,n.canJump=!1;break;case 39:p[n.position.x+n.speed][n.position.y+15]||(n.clearRect(),n.position.x+=n.speed);break;case 40:n.clearRect(),n.position.y+=10;break}}function A({keyCode:a,type:t}){}function W(){let a=new E;h.getInstance().initElement("mainCanvas"),a.drawWorld(),P()}W();})();
//# sourceMappingURL=bundle.js.map
